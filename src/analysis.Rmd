---
title: "Predicting Stock Price Using Technical Indicators"
author: "Ha Le and Duong Pham"
date: "3/22/2022"
output: html_document
---

```{r setup, include=FALSE, echo=TRUE}
library(tidyr)
library(tidyverse)
library(dygraphs)
library(ggplot2)
library(xts)
library(forecast)
library(Metrics)
```

```{r}
#read in the dataset
price_df <- read_csv('../results/csvs/simplifies_df.csv') %>% as_tibble()
input_stock <- 'MBB'
stock_df <- price_df %>% filter(stock_code == input_stock)
stock_df
```
# Visualizing Stock Price Using  Dygraphs (Panel 1)

```{r}
data <- data.frame(
  time= stock_df$date, 
  value1=stock_df$open, 
  value2=stock_df$high, 
  value3=stock_df$low, 
  value4=stock_df$close 
)

# switch to xts format
data <- xts(x = data[,-1], order.by = data$time)

# Plot it
p <- dygraph(data) %>%
  dyCandlestick()
p
```
# Training and Fitting ARIMA model

```{r}
#create training and testing period
train1_df <- stock_df %>% 
  filter(stock_df$date >= as.Date('2021-06-01') & 
           stock_df$date <= as.Date('2021-12-31')) %>%
  select(c(date, close))
  
test1_df <- stock_df %>%
  filter(stock_df$date >= as.Date('2022-01-01')) %>%
  select(c(date, close))
test1_df
```